version: '3.6'
# Volumes are HOST directory and then CONTAINER directory

services:
  mkelk:
    image: mediakraken/mkelk:dev
    environment:
      - ELASTICSEARCH_START=1
      - LOGSTASH_START=1
      - KIBANA_START=1
    container_name: mkelk
    stop_grace_period: 30s
    stop_signal: SIGTERM
    volumes:
      - mediakraken_vol_test_elk:/var/lib/elasticsearch
    networks:
      - mediakraken_test_network
    ports:
      - "5000:5000"
      - "5044:5044"
      - "5601:5601"
      - "9200:9200"
    restart: unless-stopped

networks:
  mediakraken_test_network:
    driver: bridge
    name: mk_mediakraken_test_network

volumes:
  mediakraken_vol_test_elk:
